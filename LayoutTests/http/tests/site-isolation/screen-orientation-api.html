<!-- webkit-test-runner [ SiteIsolationEnabled=true ] -->
<script src="/js-test-resources/js-test.js"></script>
<script src="/js-test-resources/ui-helper.js"></script>

<script>
    description("Tests screen orientation api readonly attributes and onchange event with site isolation.");
    window.jsTestIsAsync = true;

    addEventListener("message", (event) => {
        if (event.data == "rotate device") {
            (async () => {
            await UIHelper.rotateDevice("landscape-right");
            await UIHelper.ensurePresentationUpdate();
            })();
        }
        else {
            testPassed(event.data);
            finishJSTest();
        }
    });
</script>
<iframe src="http://localhost:8000/site-isolation/resources/screen-orientation-rotate-device.html" id="orientationFrame"></iframe>